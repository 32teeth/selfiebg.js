var selfiebg=function(){function d(){if(navigator.userAgent.match(/(iPad|iPhone|iPod)/g)||navigator.userAgent.match(/(Android)/g)){p=true}if(!p){var e=document.querySelector("body");e.style.margin=0;e.style.padding=0;v();m();g();b();w()}}function v(){var e=document.createElement("video");e.setAttribute("id",t);e.setAttribute("autoplay",true);e.setAttribute("width",400);e.setAttribute("height",300);e.style.display="none";document.body.appendChild(e)}function m(){var e=document.createElement("canvas");e.setAttribute("id",r);e.style.display="block";e.style.zIndex="-2";e.setAttribute("width",400);e.setAttribute("height",300);e.style.position="fixed";e.style.top=0;e.style.bottom=0;e.style.left=0;e.style.right=0;document.body.appendChild(e)}function g(){var e=document.createElement("overlay");e.setAttribute("id",s);e.style.display="block";e.style.background="url('"+o+"')";e.style.width="100%";e.style.height="100%";e.style.position="fixed";e.style.zIndex="-1";e.style.top=0;e.style.bottom=0;e.style.left=0;e.style.right=0;document.body.appendChild(e)}function y(){var e=document.createElement("button");e.setAttribute("id",a);e.innerHTML=f;e.style.display="block";e.style.position="fixed";e.style.right="1rem";e.style.top="1rem";e.style.zIndex="9999";e.addEventListener("click",function(){selfiebg.stop();this.style.display="none"});document.body.appendChild(e)}function b(){navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.URL=window.URL||window.webkitURL}function w(){e=document.getElementById(t);n=document.getElementById(r);c=n.getContext("2d");navigator.getMedia({video:true,audio:false},function(t){e.src=window.URL.createObjectURL(t);h=t;if(l){y()}setTimeout(function(){S()},500)},function(e){})}function E(){h.stop();e.pause()}function S(){var t=window.innerWidth;var r=window.innerHeight;setInterval(function(){t=window.innerWidth;r=window.innerHeight;if(t>r){r=t*.74}if(r>t){t=r*1.33}n.setAttribute("width",t);n.setAttribute("height",r);c.drawImage(e,0,0,t,r)},100)}var e;var t="selfiebg_video";var n;var r="selfiebg_canvas";var i;var s="selfiebg_overlay";var o="selfiebg.png";var u;var a="selfiebg_button";var f="x";var l=false;var c;var h;var p;return{setup:function(){d()},start:function(){w()},stop:function(){E()}}}();selfiebg.setup()